<!DOCTYPE html><html><head><meta charset="UTF-8">
<style>
  html{
   height: 100%;
  }
  body{
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  webview{display: none;flex-grow:1;}
  .curWV{display: inherit !important;}
</style>
<script>
  var wv;
  function switchTab(i){
    wv.classList.remove('curWV');
    try {
      wv = document.body.children[i+1];
    }catch(e){}
    wv.classList.add('curWV');
  }
  function onHashChange(){
    wv.src = location.hash.slice(1);
  }
  function keyPress(e){
    if(e.code === "Escape") {
      window.focus();
      return;
    }
    var key = e.key;
    var inputE = document.forms[0].q;
    if (e.ctrlKey || e.metaKey) {
      if(key.toLowerCase() === 'l'){
        inputE.focus();
        inputE.select();
      }
      return;
    }
    switch (key) {
    case "!":
      if (inputE !== document.activeElement){
        inputE.value = ":! ";
        inputE.focus();
      }
      break;
    case ":":
      inputE.focus();
      break;
    }
  }
  function getQ(){return document.forms[0].q.value;}
  function gs(t){var d=document;var q=getQ();var u=q;var a=q.indexOf('://');if((q.indexOf('.')>0||a>0)&&q.indexOf(' ')<0){if(a<0){u='http://'+q}}else{u=t+encodeURIComponent(q)}wv.src=u}
</script>
</head>
<body>
  <form action="javascript:gs('https://metaso.cn?q=')">
  <input type="text" name=q style="width:100%"></form>
  <webview class="curWV" style="width:100%"></webview>
  <script>
    wv = document.body.children[1];
    wv.src = location.hash.slice(1);
    window.addEventListener('hashchange',onHashChange);
    document.addEventListener('keydown', keyPress);
  </script>
</body></html>
